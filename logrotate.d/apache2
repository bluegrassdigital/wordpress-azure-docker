/home/LogFiles/*.log
{
        su www-data www-data
        daily
        missingok
        rotate 14
        olddir /home/LogFiles/sync/archive
        compress
        notifempty
        create 0640 www-data www-data
        dateext
        dateformat .%Y-%m-%d
        sharedscripts
        copytruncate
}

/home/LogFiles/sync/*.log
/home/LogFiles/sync/apache2/*.log
{
        su www-data www-data
        daily
        missingok
        rotate 14
        olddir /home/LogFiles/sync/archive
        compress
        notifempty
        create 0640 www-data www-data
        dateext
        dateformat .%Y-%m-%d
        sharedscripts
        copytruncate
        postrotate
                if invoke-rc.d apache2 status > /dev/null 2>&1; then \
                    invoke-rc.d apache2 reload > /dev/null 2>&1; \
                fi;
        endscript
        prerotate
                if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
                        run-parts /etc/logrotate.d/httpd-prerotate; \
                fi; \
        endscript
}

/homelive/LogFiles/sync/*.log
/homelive/LogFiles/sync/apache2/*.log
{
        su www-data www-data
        daily
        missingok
        rotate 14
        olddir /homelive/LogFiles/sync/archive
        compress
        notifempty
        create 0640 www-data www-data
        dateext
        dateformat .%Y-%m-%d
        sharedscripts
        copytruncate
        postrotate
                if invoke-rc.d apache2 status > /dev/null 2>&1; then \
                    invoke-rc.d apache2 reload > /dev/null 2>&1; \
                fi;
                # Persist homelive archives to home (Azure Files)
                mkdir -p /home/LogFiles/sync/archive >/dev/null 2>&1 || true; \
                rsync -a /homelive/LogFiles/sync/archive/ /home/LogFiles/sync/archive/ >/dev/null 2>&1 || true;
        endscript
        prerotate
                if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
                        run-parts /etc/logrotate.d/httpd-prerotate; \
                fi; \
        endscript
}
